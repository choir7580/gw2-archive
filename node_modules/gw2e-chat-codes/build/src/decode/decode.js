"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.decode = void 0;
var ChatCodeStruct_1 = require("../ChatCodeStruct");
var static_1 = require("../static");
var decodeIdLink_1 = require("./decodeIdLink");
var decodeObjectiveLink_1 = require("./decodeObjectiveLink");
var decodeItemLink_1 = require("./decodeItemLink");
var decodeBuildLink_1 = require("./decodeBuildLink");
function decode(chatCode) {
    // Check if the chat code matches the basic structure it should have
    if (!chatCode.match(/\[&([a-z\d+/]+=*)]/i)) {
        return false;
    }
    // Decode the chat code into a struct
    var struct = new ChatCodeStruct_1.ChatCodeStruct();
    struct.decodeFromChatCode(chatCode);
    // The header describing the type of the chat code is encoded as the first byte
    var typeHeader = struct.read1Byte();
    var codeType = Object.keys(static_1.TYPE_HEADERS).find(function (key) { return static_1.TYPE_HEADERS[key] === typeHeader; });
    switch (codeType) {
        case 'map':
        case 'skill':
        case 'trait':
        case 'recipe':
        case 'skin':
        case 'outfit':
            return (0, decodeIdLink_1.decodeIdLink)(codeType, struct);
        case 'item':
            return (0, decodeItemLink_1.decodeItemLink)(struct);
        case 'objective':
            return (0, decodeObjectiveLink_1.decodeObjectiveLink)(struct);
        case 'build':
            return (0, decodeBuildLink_1.decodeBuildLink)(struct);
        default:
            return false;
    }
}
exports.decode = decode;
//# sourceMappingURL=decode.js.map